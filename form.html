<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Form Registrasi</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#f6f7f9; margin:0; padding:24px; }
    .card { max-width: 640px; margin:0 auto; background:#fff; border-radius:12px; box-shadow:0 6px 24px rgba(0,0,0,.07); padding:24px; }
    h1 { font-size: 22px; margin:0 0 16px; }
    label { display:block; font-weight:600; margin:12px 0 6px; }
    input, textarea, select { width:100%; padding:10px 12px; border:1px solid #d7dbe1; border-radius:8px; background:#fff; outline:none; font-size:14px; }
    input:focus, textarea:focus, select:focus { border-color:#3b82f6; box-shadow:0 0 0 3px rgba(59,130,246,.15); }
    .row { display:flex; gap:12px; }
    .row .col { flex:1; }
    .actions { display:flex; align-items:center; gap:12px; margin-top:16px; }
    button { background:#3b82f6; color:#fff; border:none; padding:10px 16px; border-radius:8px; font-weight:600; cursor:pointer; }
    button[disabled] { opacity:.6; cursor:not-allowed; }
    .msg { display:none; padding:10px 12px; border-radius:8px; margin-top:12px; }
    .msg.ok { background:#ecfdf5; color:#065f46; border:1px solid #a7f3d0; }
    .msg.err { background:#fef2f2; color:#991b1b; border:1px solid #fecaca; }
    .harga-box { background:#f1f5f9; border:1px dashed #cbd5e1; border-radius:8px; padding:8px 12px; margin-top:8px; font-size:14px; color:#334155; display:none; }
    footer { text-align:center; color:#7a8493; font-size:13px; margin-top:18px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Form Registrasi</h1>
    <p>Silakan isi data di bawah ini.</p>

    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <form id="regForm" action="YOUR_GOOGLE_SCRIPT_URL_HERE" method="POST" target="hidden_iframe" autocomplete="on" novalidate>
      <input type="text" name="hp" tabindex="-1" autocomplete="off" style="position:absolute;left:-9999px;opacity:0;height:0;width:0;"/>

      <label for="nama_usaha">Nama (Usaha)</label>
      <input id="nama_usaha" name="nama_usaha" type="text" placeholder="PT/UD/Nama Usaha atau Pribadi" required>

      <label for="alamat_instalasi">Alamat Instalasi</label>
      <textarea id="alamat_instalasi" name="alamat_instalasi" rows="3" placeholder="Nama jalan, RT/RW, kelurahan/kecamatan, kota/kabupaten" required></textarea>

      <div class="row">
        <div class="col">
          <label for="telp">No Telp / WA</label>
          <input id="telp" name="telp" type="tel" inputmode="tel" pattern="[0-9+()\\-\\s]{8,}" placeholder="+62 8xx xxx xxxx" required>
        </div>
        <div class="col">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="email@domain.com" required>
        </div>
      </div>

      <!-- üîΩ Dropdown paket -->
      <label for="kapasitas">Paket Internet</label>
      <select id="kapasitas" name="kapasitas" required>
        <option value="" disabled selected>Pilih paket...</option>
        <option value="5 Mbps">5 Mbps</option>
        <option value="10 Mbps">10 Mbps</option>
        <option value="20 Mbps">20 Mbps</option>
        <option value="30 Mbps">30 Mbps</option>
        <option value="50 Mbps">50 Mbps</option>
      </select>

      <!-- Harga otomatis -->
      <div id="hargaBox" class="harga-box"></div>

      <label for="link_ktp">Link KTP / Gambar</label>
      <input id="link_ktp" name="link_ktp" type="url" placeholder="Link Google Drive / Upload Anda" required>

      <div class="actions">
        <button type="submit" id="btnSubmit">Kirim</button>
        <span id="loading" style="display:none;">Mengirim...</span>
      </div>

      <div id="msgOK" class="msg ok">‚úÖ Data berhasil dikirim!</div>
      <div id="msgERR" class="msg err">‚ùå Gagal mengirim data. Coba lagi.</div>
    </form>
  </div>

  <footer>¬© 2025 Form Registrasi | Dibuat dengan ‚ù§Ô∏è</footer>

  <script>
    const form = document.getElementById("regForm");
    const btn = document.getElementById("btnSubmit");
    const loading = document.getElementById("loading");
    const msgOK = document.getElementById("msgOK");
    const msgERR = document.getElementById("msgERR");
    const kapasitas = document.getElementById("kapasitas");
    const hargaBox = document.getElementById("hargaBox");

    // Daftar harga paket
    const hargaPaket = {
      "5 Mbps": 150000,
      "10 Mbps": 250000,
      "20 Mbps": 350000,
      "30 Mbps": 450000,
      "50 Mbps": 650000
    };

    // Event listener saat memilih paket
    kapasitas.addEventListener("change", e => {
      const pilihan = e.target.value;
      const harga = hargaPaket[pilihan];
      if (harga) {
        hargaBox.style.display = "block";
        hargaBox.innerHTML = `<b>Harga Paket:</b> Rp ${harga.toLocaleString("id-ID")} / bulan`;
      } else {
        hargaBox.style.display = "none";
      }
    });

    // Fungsi kirim ke Google Script
    form.addEventListener("submit", e => {
      e.preventDefault();
      msgOK.style.display = "none";
      msgERR.style.display = "none";
      btn.disabled = true;
      loading.style.display = "inline";

      fetch(form.action, { method: "POST", body: new FormData(form) })
        .then(res => {
          if (res.ok) {
            msgOK.style.display = "block";
            form.reset();
            hargaBox.style.display = "none";
          } else {
            throw new Error("Gagal kirim");
          }
        })
        .catch(() => {
          msgERR.style.display = "block";
        })
        .finally(() => {
          btn.disabled = false;
          loading.style.display = "none";
        });
    });
  </script>
</body>
</html>
